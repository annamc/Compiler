<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
   <head>
   <title>Anna's Compiler</title>
   <link rel="stylesheet" type="text/css" href="style.css" />
	
   <script type="text/javascript" src="utils.js"></script>
   <script type="text/javascript" src="lexer.js"></script>	
   <script type="text/javascript" src="parser.js"></script>

   <script type="text/javascript" src="javascriptcandy.js"></script>
   
   <script type="text/javascript">
   
function init()
    {
        // Clear the message box.
        document.getElementById("taOutput").value = "";
        // Set the initial values for our globals.
        tokens = "";
        tokenIndex = 0;
        currentToken = ' ';
        errorCount = 0;
        idList = new Array();
    }
    
    function btnCompile_click()
    {        
        // This is executed as a result of the usr pressing the 
        // "compile" button between the two text areas, above.  
        // Note the <input> element's event handler: onclick="btnCompile_click();
        init();
        putMessage("taOutput","Compilation Started");
        // Grab the tokens from the lexer . . .
        tokens = lex(idList);
//        for (var identifier in idList)
//	    putMessage("taOutput",identifier + ":" + idList[identifier])
        if (tokens[0] == eErrorsFound) {
          putMessage("taOutput","Lex errors found!");
          //for (var e=1; e<tokens.length; e++) {
          //  putMessage("taOutput"," " + tokens[e]);
          //}
        }
        else {
          putMessage("taOutput","Lex was successful!");
          //for (var e=0; e<tokens.length; e++) {
          //  putMessage("taOutput"," " + tokens[e]);
          //}
          // ... and parse!
          parse();

        }
        
    }
        
    function putMessage(area,msg)
    {
        document.getElementById(area).value += msg + "\n";
    }

   </script>
   
   </head>   
   <body>
<h1>Anna's Compiler Project</h1>
    <p>
        . . . <em>a simple parser for a simple grammar</em>:
    </p>
   <form id="myform">
   <textarea id="taSourceCode">
   
   
   </textarea>
   </form>
   <script type="text/javascript">
     createTextAreaWithLines('taSourceCode');
   </script>
   <input type="button" id="btnCompile" value="Compile" onclick="btnCompile_click();"/>
        <br>
   <br>
Lex/Parse Output<br><textarea id="taOutput"></textarea><br>
Parse Tree<br><textarea id="taParseTree"></textarea><br>
Environment<br><textarea id="taEnvironments"></textarea><br>
Trace<br><textarea id="taTrace"></textarea><br>

   </body>
       <pre>
Program       ::== Statement $
Statement     ::== P ( Expr )
              ::== Id = Expr
              ::== VarDecl
              ::== { StatementList }
StatementList ::== Statement StatementList
              ::== E
Expr          ::== IntExpr
              ::== CharExpr
              ::== Id
IntExpr       ::== digit op Expr
              ::== digit
CharExpr      ::== " CharList "
CharList      ::== Char CharList
              ::== E
VarDecl       ::== Type Id
Type          ::== int | char
Id            ::== Char
Char          ::== a | b | c ... z
digit         ::== 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0
op            ::== + | -
    </pre>   
</html>